(function(e,t){function n(){this.hasDeviceMotion="ondevicemotion"in e;this.threshold=15;this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null;this.event=t.createEvent("Event");this.event.initEvent("shake",true,true)}n.prototype.reset=function(){this.lastTime=new Date;this.lastX=null;this.lastY=null;this.lastZ=null};n.prototype.start=function(){this.reset();if(this.hasDeviceMotion){e.addEventListener("devicemotion",this,false)}};n.prototype.stop=function(){if(this.hasDeviceMotion){e.removeEventListener("devicemotion",this,false)}this.reset()};n.prototype.devicemotion=function(t){var n=t.accelerationIncludingGravity,r,i,s=0,o=0,u=0;if(this.lastX===null&&this.lastY===null&&this.lastZ===null){this.lastX=n.x;this.lastY=n.y;this.lastZ=n.z;return}s=Math.abs(this.lastX-n.x);o=Math.abs(this.lastY-n.y);u=Math.abs(this.lastZ-n.z);if(s>this.threshold&&o>this.threshold||s>this.threshold&&u>this.threshold||o>this.threshold&&u>this.threshold){r=new Date;i=r.getTime()-this.lastTime.getTime();if(i>1e3){e.dispatchEvent(this.event);this.lastTime=new Date}}};n.prototype.handleEvent=function(e){if(typeof this[e.type]==="function"){return this[e.type](e)}};var r=new n;r.start()})(window,document)